<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "/schema/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:html="http://www.w3.org/1999/xhtml"><head><title>EXSLT - str:encode-uri - Implementer Page</title><link rel="stylesheet" href="base.css"/></head><body><h1 id="#title"><a href="http://www.exslt.org/">EXSLT</a> - <a href="http://www.exslt.org/str">str</a>:<a href="http://www.exslt.org/str/functions/encode-uri">encode-uri</a> - Implementer Page</h1><table><tr><td id="menu"><p class="level1"><a href="index.html">User Page</a></p><p class="level1"><a href="../../../howto.html">How To</a></p><p class="level1"><a href="../../../download.html">Downloads</a></p><p class="level1">Modules</p><p class="level2"><a href="../../../date/date.html">Dates and Times</a></p><p class="level2"><a href="../../../dyn/dyn.html">Dynamic</a></p><p class="level2"><a href="../../../exsl/exsl.html">Common</a></p><p class="level2"><a href="../../../func/func.html">Functions</a></p><p class="level2"><a href="../../../math/math.html">Math</a></p><p class="level2"><a href="../../../random/random.html">Random</a></p><p class="level2"><a href="../../../regexp/regexp.html">Regular Expressions</a></p><p class="level2"><a href="../../../set/set.html">Sets</a></p><p class="level2"><a href="../../../str/str.html">Strings</a></p><p class="level3"><a href="../../functions/align/str.align.html">str:align()</a></p><p class="level3"><a href="../../functions/concat/str.concat.html">str:concat()</a></p><p class="level3"><a href="../../functions/decode-uri/str.decode-uri.html">str:decode-uri()</a></p><p class="level3"><a href="../../functions/encode-uri/str.encode-uri.html">str:encode-uri()</a></p><p class="level3"><a href="../../functions/padding/str.padding.html">str:padding()</a></p><p class="level3"><a href="../../functions/replace/str.replace.html">str:replace()</a></p><p class="level3"><a href="../../functions/split/str.split.html">str:split()</a></p><p class="level3"><a href="../../functions/tokenize/str.tokenize.html">str:tokenize()</a></p><p class="level1"><a href="../../../submissions/">Submissions</a></p><p class="level1"><a href="../../../list">Mailing List</a></p><p class="level1"><a href="../../../contact.html">Contact</a></p></td><td id="content"><p><b>Version: </b>2<br/><b>Status: </b>new<br/><b>User Page: </b><a href="index.html">index.html</a><br/><b>XML Definition: </b><a href="str.encode-uri.xml">str.encode-uri.xml</a><br/><b>Function Package: </b><a href="str.encode-uri.zip">str.encode-uri.zip</a></p><h4>Function Syntax</h4><pre><var>string</var> <b>str:encode-uri</b>(<var>string</var>, <var>string</var>, <var>string</var>?)</pre><div><p>
	   This function applies the URI escaping rules defined in section 2 of [<a href="http://www.ietf.org/rfc/rfc2396.txt">RFC 2396</a>], as amended by [<a href="http://www.ietf.org/rfc/rfc2732.txt">RFC 2732</a>], to the string supplied as the first argument, which typically represents all or part of a URI, URI reference or IRI. The effect of the function is to replace any special character in the string by an escape sequence of the form %xx%yy..., where xxyy... is the hexadecimal representation of the octets used to represent the character in US-ASCII for characters in the ASCII repertoire, and a different character encoding for non-ASCII characters.
      </p><p>
	   The set of characters that are escaped depends on the setting of the second argument.
      </p><p>
	   If the second argument is true, all characters are escaped other than lower case letters a-z, upper case letters A-Z, digits 0-9, and the characters referred to in [<a href="http://www.ietf.org/rfc/rfc2396.txt">RFC 2396</a>] as "marks": specifically, "-" | "_" | "." | "!" | "~" | "*" | "'" | "(" | ")". The "%" character itself is escaped only if it is not followed by two hexadecimal digits (that is, 0-9, a-f, and A-F).
      </p><p>
	   If the second argument is false, the behavior differs in that characters referred to in [<a href="http://www.ietf.org/rfc/rfc2396.txt">RFC 2396</a>] and [<a href="http://www.ietf.org/rfc/rfc2732.txt">RFC 2732</a>] as reserved characters are not escaped. These characters are ";" | "/" | "?" | ":" | "@" | "&amp;" | "=" | "+" | "$" | "," | "[" | "]".
      </p><p>
	   [<a href="http://www.ietf.org/rfc/rfc2396.txt">RFC 2396</a>] does not define whether escaped URIs should use lower case or upper case for hexadecimal digits. To ensure that escaped URIs can be compared using string comparison functions, this function must always use the upper-case letters A-F.
      </p><p>
	   Generally, the second argument should be set to true when escaping a string that is to form a single part of a URI, URI reference or IRI, and to false when escaping an entire URI, URI reference or IRI.
      </p><p>
	   The character encoding used as the basis for determining the octets depends on the setting of the optional third argument. If the argument is given, it should be an encoding name listed in [<a href="http://www.iana.org/assignments/character-sets">Charsets</a>], and may be given case-insensitively. The default encoding, if the argument is not given, is UTF-8. UTF-8 is the only encoding required to be supported by an implementation of this function. If the given encoding is not supported, then the function returns an empty string. If the encoding is supported but a character in the string cannot be represented in that encoding, then the character is escaped as if it were a question mark ("%3F").
      </p><p>
	   Examples:<br/></p><p><code>str:encode-uri('http://www.example.com/my résumé.html',false())</code><br/>
	   returns<br/><code>http://www.example.com/my%20r%E9sum%C3%A9.html</code></p><p><code>str:encode-uri('http://www.example.com/my résumé.html',true())</code><br/>
	   returns<br/><code>http%3A%2F%2Fwww.example.com%2Fmy%20r%C3%A9sum%C3%A9.html</code></p><p><code>str:encode-uri('http://www.example.com/my résumé.html',false(),'iso-8859-1')</code><br/>
	   returns<br/><code>http://www.example.com/my%20r%E9sum%E9.html</code> if the implementation supports iso-8859-1, or an empty string otherwise.
      </p></div><p>
      An implementation of this extension 
      function
      in the EXSLT str namespace must conform to the behaviour described in this document.
   </p><h2>Implementations</h2><p>
            Built-in support for <code>str:encode-uri</code> is available in the following XSLT processors:
         </p><table><tr><th class="rowhead">Processor</th><th>Processor Version</th><th>Implemented Version</th></tr><tr><td class="rowhead"><a href="http://4Suite.org">4XSLT, from 4Suite.</a></td><td>0.12.0a3</td><td>1</td></tr></table><p>
            The following implementations of <code>str:encode-uri</code> are available:
         </p><table><tr><th class="rowhead">Language</th><th>Implemented Version</th><th>Creator</th><th>Date</th><th>Download</th></tr><tr><td class="rowhead"><a href="str.encode-uri.msxsl.xsl.html">Msxsl</a></td><td>1</td><td><a href="mailto:chris@bayes.co.uk">Chris Bayes</a></td><td>2001-06-26</td><td><a href="str.encode-uri.msxsl.xsl">str.encode-uri.msxsl.xsl</a></td></tr><tr><td class="rowhead"><a href="str.encode-uri.js.html">Javascript</a></td><td>1</td><td><a href="mailto:chris@bayes.co.uk">Chris Bayes</a></td><td>2001-06-26</td><td><a href="str.encode-uri.js">str.encode-uri.js</a></td></tr></table><h2>Change History</h2><p><b>Previous Version: </b><a href="str.encode-uri.1.html">str.encode-uri.1.html</a></p><table><tr><th class="rowhead">Version</th><th>Modified</th><th>By</th><th>Details</th></tr><tr><td class="rowhead">2</td><td style="width: 5em;">2002-12-02</td><td><a href="mailto:mike@skew.org">Mike Brown</a></td><td style="text-align: left;"><p><dc:description xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:exslt="http://exslt.org/documentation" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:vcf="http://www.ietf.org/internet-drafts/draft-dawson-vcard-xml-dtd-03.txt">Updated the function syntax to more closely reflect <code xmlns="">xf:escape-uri()</code> in [<a xmlns="" href="http://www.w3.org/TR/xquery-operators/">XQFuncs</a>].</dc:description></p></td></tr></table></td></tr></table><div id="colophon"><p><a href="http://www.exslt.org/str/functions/encode-uri/str.encode-uri.html">http://www.exslt.org/str/functions/encode-uri/str.encode-uri.html</a> last modified 2002-12-02</p></div></body></html>