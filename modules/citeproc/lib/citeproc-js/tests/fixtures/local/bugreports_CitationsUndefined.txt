/*
 * Copyright (c) 2009, 2010 and 2011 Frank G. Bennett, Jr. All Rights
 * Reserved.
 *
 * The contents of this file are subject to the Common Public
 * Attribution License Version 1.0 (the “License”); you may not use
 * this file except in compliance with the License. You may obtain a
 * copy of the License at:
 *
 * http://bitbucket.org/fbennett/citeproc-js/src/tip/LICENSE.
 *
 * The License is based on the Mozilla Public License Version 1.1 but
 * Sections 14 and 15 have been added to cover use of software over a
 * computer network and provide for limited attribution for the
 * Original Developer. In addition, Exhibit A has been modified to be
 * consistent with Exhibit B.
 *
 * Software distributed under the License is distributed on an “AS IS”
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See
 * the License for the specific language governing rights and limitations
 * under the License.
 *
 * The Original Code is the citation formatting software known as
 * "citeproc-js" (an implementation of the Citation Style Language
 * [CSL]), including the original test fixtures and software located
 * under the ./std subdirectory of the distribution archive.
 *
 * The Original Developer is not the Initial Developer and is
 * __________. If left blank, the Original Developer is the Initial
 * Developer.
 *
 * The Initial Developer of the Original Code is Frank G. Bennett,
 * Jr. All portions of the code written by Frank G. Bennett, Jr. are
 * Copyright (c) 2009, 2010 and 2011 Frank G. Bennett, Jr. All Rights Reserved.
 *
 * Alternatively, the contents of this file may be used under the
 * terms of the GNU Affero General Public License (the [AGPLv3]
 * License), in which case the provisions of [AGPLv3] License are
 * applicable instead of those above. If you wish to allow use of your
 * version of this file only under the terms of the [AGPLv3] License
 * and not to allow others to use your version of this file under the
 * CPAL, indicate your decision by deleting the provisions above and
 * replace them with the notice and other provisions required by the
 * [AGPLv3] License. If you do not delete the provisions above, a
 * recipient may use your version of this file under either the CPAL
 * or the [AGPLv3] License.”
 */

>>===== MODE =====>>
citation
<<===== MODE =====<<


>>===== RESULT =====>>
..[0] <span style="text-decoration:underline;">(Johnson 1900)</span>
>>[1] <span style="text-decoration:underline;">(Lê, Smith, and Brown 2001)</span>
<<===== RESULT =====<<


>>=====  CITATIONS =====>>
[
    [
        {"citationID":"29lvik1jdg", "citationItems":[{"uri":["http://zotero.org/users/67180/items/S4BWKRXZ"], "id":3}], "properties":{"field":"{\"citationID\":\"29lvik1jdg\",\"citationItems\":[{\"uri\":[\"http://zotero.org/users/67180/items/S4BWKRXZ\"]}]}", "index":0, "noteIndex":0}}, [], []
    ],
    [
        {"citationID":"17gb9ben28", "citationItems":[{"uri":["http://zotero.org/users/67180/items/PHDTVW3W"], "id":6}], "properties":{"field":"{\"citationID\":\"17gb9ben28\",\"citationItems\":[{\"uri\":[\"http://zotero.org/users/67180/items/PHDTVW3W\"]}]}", "index":1, "noteIndex":0}}, [["29lvik1jdg", 0]], []
    ],
    [
    	{"citationID":"dkd3aklcr", "citationItems":[{"uri":["http://zotero.org/users/67180/items/MTHEQ8WZ"], "id":2}], "properties":{"field":"{\"citationID\":\"dkd3aklcr\",\"citationItems\":[{\"uri\":[\"http://zotero.org/users/67180/items/MTHEQ8WZ\"]}]}", "index":2, "noteIndex":0}}, [["29lvik1jdg", 0], ["17gb9ben28", 0]], []
    ],
    [
        {"citationID":"29lvik1jdg", "citationItems":[{"uri":["http://zotero.org/users/67180/items/S4BWKRXZ"], "id":3}], "properties":{"field":"{\"citationID\":\"29lvik1jdg\",\"citationItems\":[{\"uri\":[\"http://zotero.org/users/67180/items/S4BWKRXZ\"]}]}", "index":0, "noteIndex":0}}, [], []
    ],
    [
        {"citationID":"17gb9ben28", "citationItems":[{"uri":["http://zotero.org/users/67180/items/PHDTVW3W"], "id":6}], "properties":{"field":"{\"citationID\":\"17gb9ben28\",\"citationItems\":[{\"uri\":[\"http://zotero.org/users/67180/items/PHDTVW3W\"]}]}", "index":1, "noteIndex":0}}, [["29lvik1jdg", 0]], []
    ]
]
<<=====  CITATIONS =====<<



>>===== CSL =====>>


<style
       xmlns="http://purl.org/net/xbiblio/csl"
       class="in-text"
       version="1.0"
       default-locale="en-US-x-sort-ja-alalc97-x-translat-en">
  <!-- BOGUS COMMENT -->
  <info>
    <title>
Chicago Manual of Style (Author-Date format)</title>
    <id>
http://www.zotero.org/styles/chicago-author-date</id>
    <link rel="self" href="http://www.zotero.org/styles/chicago-author-date" />
    <author>
      <name>
Julian Onions</name>
      <email>
julian.onions@gmail.com</email>
    </author>
    <category citation-format="author-date" />
    <category field="generic-base" />
    <updated>2009-01-24T10:42:15+00:00</updated>
    <summary>
The author-date variant of the Chicago style</summary>
    <link href="http://www.chicagomanualofstyle.org/tools_citationguide.html" rel="documentation" />
  </info>
 <macro name="secondary-contributors">
    <choose>
      <if match="none" type="chapter">
        <group delimiter=". ">
          <choose>
            <if variable="author">
              <names variable="editor">
                <label form="verb-short" prefix=" " suffix=". " text-case="capitalize-first" />
                <name and="text" delimiter=", " />
              </names>
            </if>
          </choose>
          <choose>
            <if match="any" variable="author editor">
              <names variable="translator">
                <label form="verb-short" prefix=" " suffix=". " text-case="capitalize-first" />
                <name and="text" delimiter=", " />
              </names>
            </if>
          </choose>
        </group>
      </if>
    </choose>
  </macro>
  <macro name="container-contributors">
    <choose>
      <if type="chapter">
        <group delimiter=", " prefix=",">
          <choose>
            <if variable="author">
              <names variable="editor">
                <label form="verb-short" prefix=" " suffix=". " text-case="lowercase" />
                <name and="text" delimiter=", " />
              </names>
            </if>
          </choose>
          <choose>
            <if match="any" variable="author editor">
              <names variable="translator">
                <label form="verb-short" prefix=" " suffix=". " text-case="lowercase" />
                <name and="text" delimiter=", " />
              </names>
            </if>
          </choose>
        </group>
      </if>
    </choose>
  </macro>
  <macro name="anon">
    <choose>
      <if match="none" variable="author editor translator">
        <text form="short" term="anonymous" text-case="capitalize-first" />
      </if>
    </choose>
  </macro>
  <macro name="editor">
    <names variable="editor">
      <name and="text" delimiter=", " delimiter-precedes-last="always" name-as-sort-order="first" sort-separator=", " />
      <label form="short" prefix=", " suffix="." />
    </names>
  </macro>
  <macro name="translator">
    <names variable="translator">
      <name and="text" delimiter=", " delimiter-precedes-last="always" name-as-sort-order="first" sort-separator=", " />
      <label form="verb-short" prefix=", " suffix="." />
    </names>
  </macro>
  <macro name="recipient">
    <choose>
      <if type="personal_communication">
        <choose>
          <if variable="genre">
            <text text-case="capitalize-first" variable="genre" />
          </if>
          <else>
            <text term="letter" text-case="capitalize-first" />
          </else>
        </choose>
      </if>
    </choose>
    <names delimiter=", " variable="recipient">
      <label form="verb" prefix=" " suffix=" " text-case="lowercase" />
      <name and="text" delimiter=", " />
    </names>
  </macro>
  <macro name="contributors">
    <names variable="author">
      <name and="text" delimiter=", " delimiter-precedes-last="always" name-as-sort-order="first" sort-separator=", " />
      <label form="verb-short" prefix=", " suffix="." text-case="lowercase" />
      <substitute>
        <text macro="editor" />
        <text macro="translator" />
      </substitute>
    </names>
    <text macro="anon" />
    <text macro="recipient" />
  </macro>
  <macro name="contributors-short">
    <names variable="author">
      <name and="text" delimiter=", " form="short" />
      <substitute>
        <names variable="editor" />
        <names variable="translator" />
      </substitute>
    </names>
    <text macro="anon" />
  </macro>
  <macro name="interviewer">
    <names delimiter=", " variable="interviewer">
      <label form="verb" prefix=" " suffix=" " text-case="capitalize-first" />
      <name and="text" delimiter=", " />
    </names>
  </macro>
  <macro name="archive">
    <group delimiter=". ">
      <text text-case="capitalize-first" variable="archive_location" />
      <text variable="archive" />
      <text variable="archive-place" />
    </group>
  </macro>
  <macro name="access">
    <group delimiter=". ">
      <choose>
        <if match="any" type="graphic report">
          <text macro="archive" />
        </if>
        <else-if match="none" type="book thesis chapter article-journal article-newspaper article-magazine">
          <text macro="archive" />
        </else-if>
      </choose>
      <text prefix="doi:" variable="DOI" />
      <text variable="URL" />
    </group>
  </macro>
  <macro name="title">
    <choose>
      <if match="none" variable="title">
        <choose>
          <if match="none" type="personal_communication">
            <text text-case="capitalize-first" variable="genre" />
          </if>
        </choose>
      </if>
      <else-if type="book">
        <text font-style="italic" variable="title" />
      </else-if>
      <else>
        <text variable="title" />
      </else>
    </choose>
  </macro>
  <macro name="edition">
    <choose>
      <if match="any" type="book chapter">
        <choose>
          <if is-numeric="edition">
            <group delimiter=" ">
              <number form="ordinal" variable="edition" />
              <text form="short" suffix="." term="edition" />
            </group>
          </if>
          <else>
            <text suffix="." variable="edition" />
          </else>
        </choose>
      </if>
    </choose>
  </macro>
  <macro name="locators">
    <choose>
      <if type="article-journal">
        <text prefix=" " variable="volume" />
        <text prefix=", no. " variable="issue" />
      </if>
      <else-if type="book">
        <group delimiter=". " prefix=". ">
          <group>
            <text form="short" suffix=". " term="volume" text-case="capitalize-first" />
            <number form="numeric" variable="volume" />
          </group>
          <group>
            <number form="numeric" variable="number-of-volumes" />
            <text form="short" plural="true" prefix=" " suffix="." term="volume" />
          </group>
        </group>
      </else-if>
    </choose>
  </macro>
  <macro name="locators-chapter">
    <choose>
      <if type="chapter">
        <group prefix=", ">
          <text suffix=":" variable="volume" />
          <text variable="page" />
        </group>
      </if>
    </choose>
  </macro>
  <macro name="locators-article">
    <choose>
      <if type="article-newspaper">
        <group delimiter=", " prefix=", ">
          <group>
            <text suffix=" " variable="edition" />
            <text prefix=" " term="edition" />
          </group>
          <group>
            <text form="short" suffix=". " term="section" />
            <text variable="section" />
          </group>
        </group>
      </if>
      <else-if type="article-journal">
        <text prefix=": " variable="page" />
      </else-if>
    </choose>
  </macro>
  <macro name="point-locators">
    <group>
      <choose>
        <if locator="page" match="none">
          <label form="short" strip-periods="false" suffix=" " variable="locator" />
        </if>
      </choose>
      <text variable="locator" />
    </group>
  </macro>
  <macro name="container-prefix">
    <text term="in" text-case="capitalize-first" />
  </macro>
  <macro name="container-title">
    <choose>
      <if type="chapter">
        <text macro="container-prefix" suffix=" " />
      </if>
    </choose>
    <text font-style="italic" variable="container-title" form="short"/>
  </macro>
  <macro name="publisher">
    <group delimiter=": ">
      <text variable="publisher-place" />
      <text variable="publisher" />
    </group>
  </macro>
  <macro name="date">
    <date variable="issued" form="text" date-parts="year">
<date-part name="year"/>
</date>
  </macro>
  <macro name="day-month">
    <date variable="issued">
      <date-part name="month" />
      <date-part name="day" prefix=" " />
    </date>
  </macro>
  <macro name="collection-title">
    <text variable="collection-title" />
    <text prefix=" " variable="collection-number" />
  </macro>
  <macro name="event">
    <group>
      <text suffix=" " term="presented at" />
      <text variable="event" />
    </group>
  </macro>
  <macro name="description">
    <group delimiter=". ">
      <text macro="interviewer" />
      <text text-case="capitalize-first" variable="medium" />
    </group>
    <choose>
      <if match="none" variable="title">
 </if>
      <else-if type="thesis">
 </else-if>
      <else>
        <text prefix=". " text-case="capitalize-first" variable="genre" />
      </else>
    </choose>
  </macro>
  <macro name="issue">
    <choose>
      <if type="article-journal">
        <text macro="day-month" prefix=" (" suffix=")" />
      </if>
      <else-if type="speech">
        <group delimiter=", " prefix=" ">
          <text macro="event" />
          <text macro="day-month" />
          <text variable="event-place" />
        </group>
      </else-if>
      <else-if match="any" type="article-newspaper article-magazine">
        <text macro="day-month" prefix=", " />
      </else-if>
      <else>
        <group delimiter=", " prefix=". ">
          <choose>
            <if type="thesis">
              <text text-case="capitalize-first" variable="genre" />
            </if>
          </choose>
          <text macro="publisher" />
          <text macro="day-month" />
        </group>
      </else>
    </choose>
  </macro>
  <citation          disambiguate-add-givenname="true"         disambiguate-add-names="true"         disambiguate-add-year-suffix="true"         et-al-min="4"         et-al-subsequent-min="4"         et-al-subsequent-use-first="1"         et-al-use-first="1">
    <layout text-decoration="underline" delimiter="; " prefix="(" suffix=")">
      <group delimiter=", ">
        <group delimiter=" ">
          <text macro="contributors-short" />
          <text macro="date" />
        </group>
        <text macro="point-locators" />
      </group>
    </layout>
  </citation>
  <bibliography          entry-spacing="0"         et-al-min="11"         et-al-use-first="7"         hanging-indent="true"         subsequent-author-substitute="---">
    <sort>
      <key macro="contributors" />
      <key variable="issued" />
    </sort>
    <layout suffix=".">
      <text macro="contributors" suffix=". " />
      <text macro="date" suffix=". " />
      <text macro="title" />
      <text macro="description"/>
      <text macro="secondary-contributors" prefix=". " />
      <text macro="container-title" prefix=". "/>
      <text macro="container-contributors" />
      <text macro="locators-chapter" />
      <text macro="edition" prefix=". " />
      <text macro="locators" />
      <text macro="collection-title" prefix=". " />
      <text macro="issue" />
      <text macro="locators-article" />
      <text macro="access" prefix=". " />
    </layout>
  </bibliography>
</style>


<<===== CSL =====<<


>>===== INPUT =====>>
[
    {"id":3,"type":"book","title":"Albondigas","author":[{"family":"Johnson","given":"Charles"}],"issued":{"date-parts":[[1900]]}},
    {"id":6,"type":"book","title":"Book X","author":[{"family":"Lê","given":"Cao Đài"},{"family":"Smith","given":"John"},{"family":"Brown","given":"James"}],"issued":{"date-parts":[[2001]]}},
    {"id":2,"type":"book","title":"My Little Book","author":[{"family":"Smith","given":"John"}],"issued":{"date-parts":[[1955]]}}
]
<<===== INPUT =====<<
